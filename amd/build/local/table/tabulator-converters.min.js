define("local_cltools/local/table/tabulator-converters",["exports","./tabulator-edition","./tabulator-entity-lookup","./tabulator-generic-lookup"],(function(_exports,_tabulatorEdition,_tabulatorEntityLookup,_tabulatorGenericLookup){function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncIterator(iterable){var method,async,sync,retry=2;for("undefined"!=typeof Symbol&&(async=Symbol.asyncIterator,sync=Symbol.iterator);retry--;){if(async&&null!=(method=iterable[async]))return method.call(iterable);if(sync&&null!=(method=iterable[sync]))return new AsyncFromSyncIterator(method.call(iterable));async="@@asyncIterator",sync="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(s){function AsyncFromSyncIteratorContinuation(r){if(Object(r)!==r)return Promise.reject(new TypeError(r+" is not an object."));var done=r.done;return Promise.resolve(r.value).then((function(value){return{value:value,done:done}}))}return AsyncFromSyncIterator=function(s){this.s=s,this.n=s.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return AsyncFromSyncIteratorContinuation(this.n.apply(this.s,arguments))},return:function(value){var ret=this.s.return;return void 0===ret?Promise.resolve({value:value,done:!0}):AsyncFromSyncIteratorContinuation(ret.apply(this.s,arguments))},throw:function(value){var thr=this.s.return;return void 0===thr?Promise.reject(value):AsyncFromSyncIteratorContinuation(thr.apply(this.s,arguments))}},new AsyncFromSyncIterator(s)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.columnSetup=void 0;var fn,_ref,columnSetup=(fn=regeneratorRuntime.mark((function _callee(columndefs,tableHandler,tableHandlerParams,tableUniqueId){var TABULATOR_CONVERTER,_iteratorAbruptCompletion,_didIteratorError,_iteratorError,_iterator,_step,columndef,colprop,params,_params;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:TABULATOR_CONVERTER={formatter:{},filter:{select:{transformer:function(coldef){return coldef.headerFilterFunc="=",coldef}},entity_lookup:{to:"autocomplete",transformer:function(coldef){var entityClass=coldef.filterParams.entityclass,displayField=coldef.filterParams.displayfield;return coldef.filterParams={values:(0,_tabulatorEntityLookup.entityLookup)(entityClass,displayField)},coldef.headerFilterFunc="=",coldef.showListOnEmpty=!0,coldef.allowEmpty=!0,coldef}}},validator:{remote:{to:function(cell,value){return(0,_tabulatorEdition.validateRemote)(cell,value,tableHandler,tableHandlerParams,tableUniqueId)}}},editor:{}},_iteratorAbruptCompletion=!1,_didIteratorError=!1,_context.prev=3,_iterator=_asyncIterator(columndefs);case 5:return _context.next=7,_iterator.next();case 7:if(!(_iteratorAbruptCompletion=!(_step=_context.sent).done)){_context.next=27;break}columndef=_step.value,_context.t0=regeneratorRuntime.keys(columndef);case 10:if((_context.t1=_context.t0()).done){_context.next=24;break}if(!((colprop=_context.t1.value)in TABULATOR_CONVERTER)){_context.next=22;break}if(colprop+"Params"in columndef&&(columndef[colprop+"Params"]=JSON.parse(columndef[colprop+"Params"])),"entity_lookup"!==columndef[colprop]){_context.next=18;break}return params=columndef[colprop+"Params"],_context.next=18,(0,_tabulatorEntityLookup.prepareEntityLookup)(params.entityclass,params.displayfield);case 18:if("generic_lookup"!==columndef[colprop]){_context.next=22;break}return _params=columndef[colprop+"Params"],_context.next=22,(0,_tabulatorGenericLookup.prepareGenericLookup)(_params.type);case 22:_context.next=10;break;case 24:_iteratorAbruptCompletion=!1,_context.next=5;break;case 27:_context.next=33;break;case 29:_context.prev=29,_context.t2=_context.catch(3),_didIteratorError=!0,_iteratorError=_context.t2;case 33:if(_context.prev=33,_context.prev=34,!_iteratorAbruptCompletion||null==_iterator.return){_context.next=38;break}return _context.next=38,_iterator.return();case 38:if(_context.prev=38,!_didIteratorError){_context.next=41;break}throw _iteratorError;case 41:return _context.finish(38);case 42:return _context.finish(33);case 43:return columndefs=columndefs.map((function(columndef){if("additionalParams"in columndef){var additionalProps=JSON.parse(columndef.additionalParams);"object"===_typeof(additionalProps)&&delete(columndef=Object.assign(columndef,additionalProps)).additionalParameters}for(var _colprop in columndef)if(_colprop in TABULATOR_CONVERTER){var tabconverter=TABULATOR_CONVERTER[_colprop];if(columndef[_colprop]in tabconverter){var converter=tabconverter[columndef[_colprop]];converter.to&&(columndef[_colprop]=converter.to),converter.transformer&&(columndef=converter.transformer(columndef))}}return columndef.filter&&(columndef.headerFilter=columndef.filter),columndef.filterParams&&(columndef.headerFilterParams=columndef.filterParams),columndef})),_context.abrupt("return",columndefs);case 45:case"end":return _context.stop()}}),_callee,null,[[3,29,33,43],[34,,38,42]])})),_ref=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(_x,_x2,_x3,_x4){return _ref.apply(this,arguments)});_exports.columnSetup=columnSetup}));

//# sourceMappingURL=tabulator-converters.min.js.map