define("local_cltools/local/table/moodle-filter-converters",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.convertInitialFilter=_exports.convertFiltersToMoodle=_exports.JOINTYPE_ANY=_exports.JOINTYPE_ALL=void 0;
/**
   * AMD module to convert between Moodle filters and Tabulator filters.
   *
   * @module   local_cltools/table/dynamic.js
   * @copyright 2021 - CALL Learning - Laurent David <laurent@call-learning.fr>
   * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
var toNumericEqual=function(val){return JSON.stringify({direction:"=",value:val})},MOODLE_FILTER_CONVERTER={like:{to:"string_filter",transformer:function(args){return{value:args}}},"=":{to:"numeric_comparison_filter",transformer:function(args){return Array.isArray(args)?args.map(toNumericEqual):"boolean"==typeof args?[toNumericEqual(args?1:0)]:[toNumericEqual(args)]}}};_exports.JOINTYPE_ANY=1;_exports.JOINTYPE_ALL=2;_exports.convertInitialFilter=function(initialFilters,existingFilters){var joinType=initialFilters?initialFilters.jointype:2;return initialFilters&&Array.prototype.push.apply(existingFilters,Object.values(initialFilters.filters)),[joinType,existingFilters]};_exports.convertFiltersToMoodle=function(tabulatorFilters){return void 0===tabulatorFilters?[]:tabulatorFilters.map((function(e){var filter={name:e.field,type:e.type,jointype:2,values:e.value};if(e.type in MOODLE_FILTER_CONVERTER){var converter=MOODLE_FILTER_CONVERTER[e.type];filter.type=converter.to,void 0!==converter.transformer&&(filter.values=converter.transformer(e.value))}return filter}))}}));

//# sourceMappingURL=moodle-filter-converters.min.js.map