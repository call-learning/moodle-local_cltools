define("local_cltools/local/table/tabulator-edition",["exports","core/notification","./repository"],(function(_exports,_notification,_repository){var obj;function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.validateRemote=_exports.cellEdited=void 0,_notification=(obj=_notification)&&obj.__esModule?obj:{default:obj};var fn,_ref,formatWarnings=function(result){var message=null;return Array.isArray(result.warnings)&&result.warnings.length&&(message=result.warnings.reduce((function(a,w){return w.message+(a||"")}),null)),message},validateRemote=(fn=regeneratorRuntime.mark((function _callee(tableHandler,tableHandlerParams,tableUniqueid,cell,value){var args;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return args={handler:tableHandler,handlerparams:tableHandlerParams,uniqueid:tableUniqueid,id:cell.getData().id,field:cell.getField(),value:JSON.stringify(value)},_context.next=3,(0,_repository.validateTableValue)(args).catch(_notification.default.exception).then((function(result){var message=formatWarnings(result);return message&&_notification.default.addNotification({message:message}),result.success}));case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}),_callee)})),_ref=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)});_exports.validateRemote=validateRemote;_exports.cellEdited=function(tableHandler,tableHandlerParams,tableUniqueid,data){var args={handler:tableHandler,handlerparams:tableHandlerParams,uniqueid:tableUniqueid,id:data.getData().id,field:data.getField(),value:JSON.stringify(data.getValue()),oldvalue:JSON.stringify(data.getOldValue())};return(0,_repository.setTableValue)(args).catch(_notification.default.exception).then((function(result){if(!result||!result.success){var message=formatWarnings(result);return message&&_notification.default.addNotification({message:message}),!1}return document.dispatchEvent(new CustomEvent("tabulator-cell-edited",args)),!0}))}}));

//# sourceMappingURL=tabulator-edition.min.js.map