define ("local_cltools/local/table/tabulator-edition",["exports","core/ajax","core/notification"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.cellEdited=a.validateRemote=void 0;c=function(a){return a&&a.__esModule?a:{default:a}}(c);function d(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){c(a);return}if(h.done){b(i)}else{Promise.resolve(i).then(d,e)}}function e(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var i=a.apply(b,c);function g(a){d(i,e,f,g,h,"next",a)}function h(a){d(i,e,f,g,h,"throw",a)}g(void 0)})}}var f=function(a){var b=null;if(Array.isArray(a.warnings)&&a.warnings.length){b=a.warnings.reduce(function(b,a){return a.message+(b?b:"")},null)}return b},g=function(){var a=e(regeneratorRuntime.mark(function a(d,e,g,h,i){var j;return regeneratorRuntime.wrap(function(a){while(1){switch(a.prev=a.next){case 0:j={handler:d,handlerparams:e,uniqueid:g,id:h.getData().id,field:h.getField(),value:JSON.stringify(i)};a.next=3;return Promise.race((0,b.call)([{methodname:"cltools_dynamic_table_validate_value",args:j}])).catch(c.default.exception).then(function(a){var b=f(a);if(b){c.default.addNotification({message:b})}return a.success});case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop();}}},a)}));return function(){return a.apply(this,arguments)}}();a.validateRemote=g;var h=function(a,d,e,g){var h={handler:a,handlerparams:d,uniqueid:e,id:g.getData().id,field:g.getField(),value:JSON.stringify(g.getValue()),oldvalue:JSON.stringify(g.getOldValue())};return Promise.race((0,b.call)([{methodname:"cltools_dynamic_table_set_value",args:h}])).catch(c.default.exception).then(function(a){if(a&&a.success){document.dispatchEvent(new CustomEvent("tabulator-cell-edited",h))}else{var b=f(a);if(b){c.default.addNotification({message:b})}return!1}return!0})};a.cellEdited=h});
//# sourceMappingURL=tabulator-edition.min.js.map
